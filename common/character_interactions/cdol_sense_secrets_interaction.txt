cdol_sense_secrets_interaction = {
	category = interaction_category_hostile
	interface_priority = 10
	common_interaction = yes
    
    desc = cdol_sense_secrets_interaction_desc

    is_shown = {
        scope:actor = {
		    cdol_has_succubus_powers_trigger = yes
            cdol_has_succubus_mastery_trigger = {
                VALUE = cdol_sense_secrets_succubus_mastery_level
            }
        }
        scope:recipient = {
		    cdol_has_succubus_powers_trigger = no
        }
    }

	is_highlighted = {
        cdol_recent_succubus_sex_partner_is_recipient_trigger = yes
        scope:actor = {
            cdol_has_sexual_power_trigger = {
                VALUE = cdol_sense_secrets_sexual_power_cost
            }
        }
	}

    is_valid_showing_failures_only = {
		cdol_recent_succubus_sex_partner_is_recipient_trigger = yes
        scope:actor = {
            cdol_has_sexual_power_trigger = {
                VALUE = cdol_sense_secrets_sexual_power_cost
            }
        }
        scope:recipient = {
            any_secret = {
                NOT = {
                    is_known_by = scope:actor
                }
            }
        }
    }

    on_accept = {
        scope:actor = {
            cdol_lose_sexual_power_effect = {
                VALUE = cdol_sense_secrets_sexual_power_cost
            }
            scope:recipient = {
                every_secret = {
                    reveal_to = scope:actor
                }
            }
            send_interface_toast = {
                title = cdol_sense_secrets_interaction_notification
                left_icon = scope:actor
                right_icon = scope:recipient
            }
            cdol_manipulation_stress_impact_effect = {
                VICTIM = scope:recipient
            }
            cdol_add_suspicion_effect = yes
        }
    }

    auto_accept = yes
}